services:
  # --- API CRUD ---
  - type: web
    name: nicekids-api-crud
    runtime: docker
    plan: free
    region: oregon
    dockerContext: ./api-crud
    dockerfilePath: ./api-crud/Dockerfile
    envVars:
      - key: PORT
        value: 3001
      - key: SUPABASE_URL
        fromGroup: supabase-settings
      - key: SUPABASE_ANON_KEY
        fromGroup: supabase-settings

  # --- API BUSINESS ---
  - type: web
    name: nicekids-api-business
    runtime: docker
    plan: free
    region: oregon
    dockerContext: ./api-business
    dockerfilePath: ./api-business/Dockerfile
    envVars:
      - key: PORT
        value: 3002
      - key: SUPABASE_URL
        fromGroup: supabase-settings
      - key: SUPABASE_SERVICE_ROLE_KEY
        fromGroup: supabase-settings

  # --- CLIENTE REACT ---
  - type: web
    name: nicekids-client
    runtime: docker
    plan: free
    region: oregon
    dockerContext: ./client
    dockerfilePath: ./client/Dockerfile
    envVars:
      - key: VITE_SUPABASE_URL
        fromGroup: supabase-settings
      - key: VITE_SUPABASE_ANON_KEY
        fromGroup: supabase-settings
      - key: VITE_GOOGLE_CLIENT_ID
        fromGroup: supabase-settings  
      # Enlace din√°mico de servicios
      - key: VITE_API_CRUD_URL
        fromService:
          type: web
          name: nicekids-api-crud
          property: url
      - key: VITE_API_BUSINESS_URL
        fromService:
          type: web
          name: nicekids-api-business
          property: url

envVarGroups:
  - name: supabase-settings
    envVars:
      - key: SUPABASE_URL
        value: https://dkfissjbxaevmxcqvpai.supabase.co
      - key: SUPABASE_ANON_KEY
        value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRrZmlzc2pieGFldm14Y3F2cGFpIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMwNzQ3NjIsImV4cCI6MjA3ODY1MDc2Mn0.jvhYLRPvgkOa-Yx4So9-b3MfouLoRl9f-iHgkldxEcI
      - key: SUPABASE_SERVICE_ROLE_KEY
        value: eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRrZmlzc2pieGFldm14Y3F2cGFpIiwicm9sZSI6InNlcnZpY2Vfcm9sZSIsImlhdCI6MTc2MzA3NDc2MiwiZXhwIjoyMDc4NjUwNzYyfQ.PKpjl12ijgNy9qAagwoqWpmdKGNVXJ8dMBXrNXNvTOU
      - key: VITE_GOOGLE_CLIENT_ID
        value: 132351690242-pu2s0jq83q1oodg 